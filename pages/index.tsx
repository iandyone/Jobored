import Head from "next/head";
import styles from "@/styles/Home.module.scss";
import FiltersBar from "@/components/filtersBar";
import { useEffect } from "react";
import axios from "@/axios";

interface IAuthResponse {
  access_token: string,
  refresh_token: string,
  token_type: string
}

export default function Home() {
  async function fetchData() {
    const response = await axios.get<IAuthResponse>('https://startup-summer-2023-proxy.onrender.com/2.0/oauth2/password', {
      params: {
        login: 'sergei.stralenia@gmail.com',
        password: 'paralect123',
        client_id: 2231,
        client_secret: 'v3.r.137440105.399b9c5f19384345afe0ad0339e619e71c66af1d.800f8642a38256679e908c370c44267f705c2909',
        hr: 0,
      }
    })
    localStorage.setItem('Access', `${response.data.token_type} ${response.data.access_token}`);   
  }

  useEffect(() => {
    fetchData()
  }, [])


  return (
    <>
      <Head>
        <title>Jobored | Main</title>
        <meta name='description' content='Generated by create next app' />
        <meta name='viewport' content='width=device-width, initial-scale=1' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      <section className={styles.jobs}>
        <div className='jobs__container container'>
          <div className='jobs__body'>
            <FiltersBar />
          </div>
        </div>
      </section>
    </>
  );
}
